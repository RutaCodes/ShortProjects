*HW5* RUTA BASIJOKAITE*;
PROC IMPORT DATAFILE="/folders/myfolders/HW5/Brain.xlsx" /** Import an XLSX file.  **/
		    OUT=WORK.HW5DATA
		    DBMS=XLSX
		    REPLACE;
		    GETNAMES=YES;
		    SCANTEXT=YES;
RUN;
OPTIONS NOCENTER NODATE PAGENO=1 LS=76 PS=45 NOLABEL;
DATA ALL;
  SET HW5DATA;
RUN;
*Pearson and Spearman correlation coefficients;
PROC CORR PEARSON SPEARMAN;
  VAR Y X;
RUN;
*PROC PLOT;
*  PLOT Y*X='*';
*RUN;
ODS GRAPHICS ON; */ ATTRPRIORITY=NONE;
PROC SGPLOT;
  SCATTER X=X Y=Y; */ DATALABEL=SPCS;
  *TITLE 'Relationship between brain and body weight';
RUN;
DATA ALL;
  SET HW5DATA;
  LNY=LOG(Y);
  LNX=LOG(X);
RUN;
PROC CORR PEARSON SPEARMAN;
  VAR LNY LNX;
RUN;
PROC SGPLOT;
  SCATTER X=LNX Y=LNY / DATALABEL=SPCS;
  *TITLE 'Transformed relationship between brain and body weight';
RUN;
*Y VS X MODEL;
PROC REG DATA=ALL;
  MODEL Y=X / DWPROB SPEC;
  OUTPUT OUT=OUT1 P=PREDICT R=RESIDUAL STDR =STDR STUDENT=STUDENT RSTUDENT=RSTUDENT;
RUN;
PROC SGPLOT DATA=OUT1;
  SCATTER X=PREDICT Y=STUDENT;
  REFLINE 0; REFLINE 2; REFLINE -2;
RUN;
PROC SGPLOT DATA=OUT1;
  SCATTER X=PREDICT Y=RSTUDENT;
  REFLINE 0; REFLINE 2; REFLINE -2;
RUN;
PROC SGPLOT DATA=OUT1;
  SCATTER X=PREDICT Y=RESIDUAL;
  REFLINE 0;
RUN;
PROC PRINT DATA=OUT1;
  VAR Y PREDICT RESIDUAL STDR STUDENT RSTUDENT;
RUN;  
PROC UNIVARIATE DATA=OUT1 PLOT NORMAL;
  VAR RESIDUAL;
RUN;
*LNY VS LNX MODEL;
PROC REG DATA=ALL;
  MODEL LNY=LNX / DWPROB SPEC;
  OUTPUT OUT=OUT2 P=PREDICT R=RESIDUAL STDR =STDR STUDENT=STUDENT RSTUDENT=RSTUDENT;
RUN;
PROC SGPLOT DATA=OUT2;
  SCATTER X=PREDICT Y=STUDENT;
  REFLINE 0; REFLINE 2; REFLINE -2;
RUN;
PROC SGPLOT DATA=OUT2;
  SCATTER X=PREDICT Y=RSTUDENT;
  REFLINE 0; REFLINE 2; REFLINE -2;
RUN;
PROC SGPLOT DATA=OUT2;
  SCATTER X=PREDICT Y=RESIDUAL;
  REFLINE 0;
RUN;
PROC PRINT DATA=OUT2;
  VAR Y PREDICT RESIDUAL STDR STUDENT RSTUDENT;
RUN;
PROC UNIVARIATE DATA=OUT2 PLOT NORMAL;
  VAR RESIDUAL;
RUN;
ODS GRAPHICS OFF;